begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to the Apache Software Foundation (ASF) under one or more  * contributor license agreements.  See the NOTICE file distributed with  * this work for additional information regarding copyright ownership.  * The ASF licenses this file to You under the Apache License, Version 2.0  * (the "License"); you may not use this file except in compliance with  * the License.  You may obtain a copy of the License at  *  *      http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  * See the License for the specific language governing permissions and  * limitations under the License.  */
end_comment

begin_package
package|package
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
package|;
end_package

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|Color
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|geom
operator|.
name|AffineTransform
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|geom
operator|.
name|PathIterator
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|Closeable
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|IOException
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|OutputStream
import|;
end_import

begin_import
import|import
name|java
operator|.
name|text
operator|.
name|NumberFormat
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Locale
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Stack
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|logging
operator|.
name|Log
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|logging
operator|.
name|LogFactory
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|cos
operator|.
name|COSArray
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|cos
operator|.
name|COSBase
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|cos
operator|.
name|COSName
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|cos
operator|.
name|COSNumber
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdfwriter
operator|.
name|COSWriter
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|common
operator|.
name|PDStream
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|documentinterchange
operator|.
name|markedcontent
operator|.
name|PDPropertyList
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|font
operator|.
name|PDFont
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|PDXObject
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDColor
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDColorSpace
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDDeviceCMYK
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDDeviceGray
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDDeviceN
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDDeviceRGB
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDICCBased
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDPattern
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|color
operator|.
name|PDSeparation
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|form
operator|.
name|PDFormXObject
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|image
operator|.
name|PDImageXObject
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|image
operator|.
name|PDInlineImage
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|shading
operator|.
name|PDShading
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|graphics
operator|.
name|state
operator|.
name|PDExtendedGraphicsState
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|pdmodel
operator|.
name|interactive
operator|.
name|annotation
operator|.
name|PDAppearanceStream
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|util
operator|.
name|Charsets
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|pdfbox
operator|.
name|util
operator|.
name|Matrix
import|;
end_import

begin_comment
comment|/**  * Provides the ability to write to a page content stream.  *  * @author Ben Litchfield  */
end_comment

begin_class
specifier|public
specifier|final
class|class
name|PDPageContentStream
implements|implements
name|Closeable
block|{
comment|/**      * This is to choose what to do with the stream: overwrite, append or prepend.      */
specifier|public
specifier|static
enum|enum
name|AppendMode
block|{
comment|/**          * Overwrite the existing page content streams.          */
name|OVERWRITE
block|,
comment|/**          * Append the content stream after all existing page content streams.          */
name|APPEND
block|,
comment|/**          * Insert before all other page content streams.          */
name|PREPEND
block|;
specifier|public
name|boolean
name|isOverwrite
parameter_list|()
block|{
return|return
name|this
operator|==
name|OVERWRITE
return|;
block|}
specifier|public
name|boolean
name|isPrepend
parameter_list|()
block|{
return|return
name|this
operator|==
name|PREPEND
return|;
block|}
block|}
specifier|private
specifier|static
specifier|final
name|Log
name|LOG
init|=
name|LogFactory
operator|.
name|getLog
argument_list|(
name|PDPageContentStream
operator|.
name|class
argument_list|)
decl_stmt|;
specifier|private
specifier|final
name|PDDocument
name|document
decl_stmt|;
specifier|private
name|OutputStream
name|output
decl_stmt|;
specifier|private
name|PDResources
name|resources
decl_stmt|;
specifier|private
name|boolean
name|inTextMode
init|=
literal|false
decl_stmt|;
specifier|private
specifier|final
name|Stack
argument_list|<
name|PDFont
argument_list|>
name|fontStack
init|=
operator|new
name|Stack
argument_list|<
name|PDFont
argument_list|>
argument_list|()
decl_stmt|;
specifier|private
specifier|final
name|Stack
argument_list|<
name|PDColorSpace
argument_list|>
name|nonStrokingColorSpaceStack
init|=
operator|new
name|Stack
argument_list|<
name|PDColorSpace
argument_list|>
argument_list|()
decl_stmt|;
specifier|private
specifier|final
name|Stack
argument_list|<
name|PDColorSpace
argument_list|>
name|strokingColorSpaceStack
init|=
operator|new
name|Stack
argument_list|<
name|PDColorSpace
argument_list|>
argument_list|()
decl_stmt|;
comment|// number format
specifier|private
specifier|final
name|NumberFormat
name|formatDecimal
init|=
name|NumberFormat
operator|.
name|getNumberInstance
argument_list|(
name|Locale
operator|.
name|US
argument_list|)
decl_stmt|;
comment|/**      * Create a new PDPage content stream.      *      * @param document The document the page is part of.      * @param sourcePage The page to write the contents to.      * @throws IOException If there is an error writing to the page contents.      */
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|document
parameter_list|,
name|PDPage
name|sourcePage
parameter_list|)
throws|throws
name|IOException
block|{
name|this
argument_list|(
name|document
argument_list|,
name|sourcePage
argument_list|,
name|AppendMode
operator|.
name|OVERWRITE
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
block|}
comment|/**      * Create a new PDPage content stream.      *      * @param document The document the page is part of.      * @param sourcePage The page to write the contents to.      * @param appendContent Indicates whether content will be overwritten. If false all previous      *                      content is deleted.      * @param compress Tell if the content stream should compress the page contents.      * @throws IOException If there is an error writing to the page contents.      * @deprecated use {@link #PDPageContentStream(PDDocument, PDPage, PDPageContentStream.AppendMode, boolean)}      */
annotation|@
name|Deprecated
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|document
parameter_list|,
name|PDPage
name|sourcePage
parameter_list|,
name|boolean
name|appendContent
parameter_list|,
name|boolean
name|compress
parameter_list|)
throws|throws
name|IOException
block|{
name|this
argument_list|(
name|document
argument_list|,
name|sourcePage
argument_list|,
name|appendContent
argument_list|,
name|compress
argument_list|,
literal|false
argument_list|)
expr_stmt|;
block|}
comment|/**      * Create a new PDPage content stream.      *      * @param document The document the page is part of.      * @param sourcePage The page to write the contents to.      * @param appendContent Indicates whether content will be overwritten, appended or prepended.      * @param compress Tell if the content stream should compress the page contents.      * @throws IOException If there is an error writing to the page contents.      */
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|document
parameter_list|,
name|PDPage
name|sourcePage
parameter_list|,
name|AppendMode
name|appendContent
parameter_list|,
name|boolean
name|compress
parameter_list|)
throws|throws
name|IOException
block|{
name|this
argument_list|(
name|document
argument_list|,
name|sourcePage
argument_list|,
name|appendContent
argument_list|,
name|compress
argument_list|,
literal|false
argument_list|)
expr_stmt|;
block|}
comment|/**      * Create a new PDPage content stream.      *      * @param document The document the page is part of.      * @param sourcePage The page to write the contents to.      * @param appendContent Indicates whether content will be overwritten. If false all previous      *                      content is deleted.      * @param compress Tell if the content stream should compress the page contents.      * @param resetContext Tell if the graphic context should be reseted. You should use this when      * appending to an existing stream, because the existing stream may have changed graphic      * properties (e.g. scaling, rotation).      * @throws IOException If there is an error writing to the page contents.      * @deprecated use {@link #PDPageContentStream(PDDocument, PDPage, PDPageContentStream.AppendMode, boolean, boolean) }      */
annotation|@
name|Deprecated
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|document
parameter_list|,
name|PDPage
name|sourcePage
parameter_list|,
name|boolean
name|appendContent
parameter_list|,
name|boolean
name|compress
parameter_list|,
name|boolean
name|resetContext
parameter_list|)
throws|throws
name|IOException
block|{
name|this
argument_list|(
name|document
argument_list|,
name|sourcePage
argument_list|,
name|appendContent
condition|?
name|AppendMode
operator|.
name|APPEND
else|:
name|AppendMode
operator|.
name|OVERWRITE
argument_list|,
name|compress
argument_list|,
name|resetContext
argument_list|)
expr_stmt|;
block|}
comment|/**      * Create a new PDPage content stream.      *      * @param document The document the page is part of.      * @param sourcePage The page to write the contents to.      * @param appendContent Indicates whether content will be overwritten, appended or prepended.      * @param compress Tell if the content stream should compress the page contents.      * @param resetContext Tell if the graphic context should be reset. This is only relevant when      * the appendContent parameter is set to {@link AppendMode#APPEND}. You should use this when      * appending to an existing stream, because the existing stream may have changed graphic      * properties (e.g. scaling, rotation).      * @throws IOException If there is an error writing to the page contents.      */
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|document
parameter_list|,
name|PDPage
name|sourcePage
parameter_list|,
name|AppendMode
name|appendContent
parameter_list|,
name|boolean
name|compress
parameter_list|,
name|boolean
name|resetContext
parameter_list|)
throws|throws
name|IOException
block|{
name|this
operator|.
name|document
operator|=
name|document
expr_stmt|;
name|COSName
name|filter
init|=
name|compress
condition|?
name|COSName
operator|.
name|FLATE_DECODE
else|:
literal|null
decl_stmt|;
comment|// If request specifies the need to append/prepend to the document
if|if
condition|(
operator|!
name|appendContent
operator|.
name|isOverwrite
argument_list|()
operator|&&
name|sourcePage
operator|.
name|hasContents
argument_list|()
condition|)
block|{
comment|// Create a stream to append new content
name|PDStream
name|contentsToAppend
init|=
operator|new
name|PDStream
argument_list|(
name|document
argument_list|)
decl_stmt|;
comment|// Add new stream to contents array
name|COSBase
name|contents
init|=
name|sourcePage
operator|.
name|getCOSObject
argument_list|()
operator|.
name|getDictionaryObject
argument_list|(
name|COSName
operator|.
name|CONTENTS
argument_list|)
decl_stmt|;
name|COSArray
name|array
decl_stmt|;
if|if
condition|(
name|contents
operator|instanceof
name|COSArray
condition|)
block|{
comment|// If contents is already an array, a new stream is simply appended to it
name|array
operator|=
operator|(
name|COSArray
operator|)
name|contents
expr_stmt|;
block|}
else|else
block|{
comment|// Creates a new array and adds the current stream plus a new one to it
name|array
operator|=
operator|new
name|COSArray
argument_list|()
expr_stmt|;
name|array
operator|.
name|add
argument_list|(
name|contents
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|appendContent
operator|.
name|isPrepend
argument_list|()
condition|)
block|{
name|array
operator|.
name|add
argument_list|(
literal|0
argument_list|,
name|contentsToAppend
operator|.
name|getCOSObject
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|array
operator|.
name|add
argument_list|(
name|contentsToAppend
argument_list|)
expr_stmt|;
block|}
comment|// save the initial/unmodified graphics context
if|if
condition|(
name|resetContext
condition|)
block|{
comment|// create a new stream to encapsulate the existing stream
name|PDStream
name|saveGraphics
init|=
operator|new
name|PDStream
argument_list|(
name|document
argument_list|)
decl_stmt|;
name|output
operator|=
name|saveGraphics
operator|.
name|createOutputStream
argument_list|(
name|filter
argument_list|)
expr_stmt|;
comment|// save the initial/unmodified graphics context
name|saveGraphicsState
argument_list|()
expr_stmt|;
name|close
argument_list|()
expr_stmt|;
comment|// insert the new stream at the beginning
name|array
operator|.
name|add
argument_list|(
literal|0
argument_list|,
name|saveGraphics
operator|.
name|getCOSObject
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|// Sets the compoundStream as page contents
name|sourcePage
operator|.
name|getCOSObject
argument_list|()
operator|.
name|setItem
argument_list|(
name|COSName
operator|.
name|CONTENTS
argument_list|,
name|array
argument_list|)
expr_stmt|;
name|output
operator|=
name|contentsToAppend
operator|.
name|createOutputStream
argument_list|(
name|filter
argument_list|)
expr_stmt|;
comment|// restore the initial/unmodified graphics context
if|if
condition|(
name|resetContext
condition|)
block|{
name|restoreGraphicsState
argument_list|()
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|sourcePage
operator|.
name|hasContents
argument_list|()
condition|)
block|{
name|LOG
operator|.
name|warn
argument_list|(
literal|"You are overwriting an existing content, you should use the append mode"
argument_list|)
expr_stmt|;
block|}
name|PDStream
name|contents
init|=
operator|new
name|PDStream
argument_list|(
name|document
argument_list|)
decl_stmt|;
name|sourcePage
operator|.
name|setContents
argument_list|(
name|contents
argument_list|)
expr_stmt|;
name|output
operator|=
name|contents
operator|.
name|createOutputStream
argument_list|(
name|filter
argument_list|)
expr_stmt|;
block|}
comment|// this has to be done here, as the resources will be set to null when resetting the content
comment|// stream
name|resources
operator|=
name|sourcePage
operator|.
name|getResources
argument_list|()
expr_stmt|;
if|if
condition|(
name|resources
operator|==
literal|null
condition|)
block|{
name|resources
operator|=
operator|new
name|PDResources
argument_list|()
expr_stmt|;
name|sourcePage
operator|.
name|setResources
argument_list|(
name|resources
argument_list|)
expr_stmt|;
block|}
comment|// configure NumberFormat
name|formatDecimal
operator|.
name|setMaximumFractionDigits
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|formatDecimal
operator|.
name|setGroupingUsed
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
comment|/**      * Create a new appearance stream. Note that this is not actually a "page" content stream.      *      * @param doc The document the page is part of.      * @param appearance The appearance stream to write to.      * @throws IOException If there is an error writing to the page contents.      */
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|doc
parameter_list|,
name|PDAppearanceStream
name|appearance
parameter_list|)
throws|throws
name|IOException
block|{
name|this
argument_list|(
name|doc
argument_list|,
name|appearance
argument_list|,
name|appearance
operator|.
name|getStream
argument_list|()
operator|.
name|createOutputStream
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|/**      * Create a new appearance stream. Note that this is not actually a "page" content stream.      *      * @param doc The document the appearance is part of.      * @param appearance The appearance stream to add to.      * @param outputStream The appearances output stream to write to.      * @throws IOException If there is an error writing to the page contents.      */
specifier|public
name|PDPageContentStream
parameter_list|(
name|PDDocument
name|doc
parameter_list|,
name|PDAppearanceStream
name|appearance
parameter_list|,
name|OutputStream
name|outputStream
parameter_list|)
throws|throws
name|IOException
block|{
name|this
operator|.
name|document
operator|=
name|doc
expr_stmt|;
name|output
operator|=
name|outputStream
expr_stmt|;
name|this
operator|.
name|resources
operator|=
name|appearance
operator|.
name|getResources
argument_list|()
expr_stmt|;
name|formatDecimal
operator|.
name|setMaximumFractionDigits
argument_list|(
literal|4
argument_list|)
expr_stmt|;
name|formatDecimal
operator|.
name|setGroupingUsed
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
comment|/**      * Begin some text operations.      *      * @throws IOException If there is an error writing to the stream or if you attempt to      *         nest beginText calls.      * @throws IllegalStateException If the method was not allowed to be called at this time.      */
specifier|public
name|void
name|beginText
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: Nested beginText() calls are not allowed."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"BT"
argument_list|)
expr_stmt|;
name|inTextMode
operator|=
literal|true
expr_stmt|;
block|}
comment|/**      * End some text operations.      *      * @throws IOException If there is an error writing to the stream or if you attempt to      *         nest endText calls.      * @throws IllegalStateException If the method was not allowed to be called at this time.      */
specifier|public
name|void
name|endText
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: You must call beginText() before calling endText."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"ET"
argument_list|)
expr_stmt|;
name|inTextMode
operator|=
literal|false
expr_stmt|;
block|}
comment|/**      * Set the font and font size to draw text with.      *      * @param font The font to use.      * @param fontSize The font size to draw the text.      * @throws IOException If there is an error writing the font information.      */
specifier|public
name|void
name|setFont
parameter_list|(
name|PDFont
name|font
parameter_list|,
name|float
name|fontSize
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|fontStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|fontStack
operator|.
name|add
argument_list|(
name|font
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fontStack
operator|.
name|setElementAt
argument_list|(
name|font
argument_list|,
name|fontStack
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|font
operator|.
name|willBeSubset
argument_list|()
condition|)
block|{
name|document
operator|.
name|getFontsToSubset
argument_list|()
operator|.
name|add
argument_list|(
name|font
argument_list|)
expr_stmt|;
block|}
name|writeOperand
argument_list|(
name|resources
operator|.
name|add
argument_list|(
name|font
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|fontSize
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Tf"
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will draw a string at the current location on the screen.      *      * @param text The text to draw.      * @throws IOException If an io exception occurs.      * @deprecated Use {@link #showText} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawString
parameter_list|(
name|String
name|text
parameter_list|)
throws|throws
name|IOException
block|{
name|showText
argument_list|(
name|text
argument_list|)
expr_stmt|;
block|}
comment|/**      * Shows the given text at the location specified by the current text matrix.      *      * @param text The Unicode text to show.      * @throws IOException If an io exception occurs.      */
specifier|public
name|void
name|showText
parameter_list|(
name|String
name|text
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Must call beginText() before showText()"
argument_list|)
throw|;
block|}
if|if
condition|(
name|fontStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Must call setFont() before showText()"
argument_list|)
throw|;
block|}
name|PDFont
name|font
init|=
name|fontStack
operator|.
name|peek
argument_list|()
decl_stmt|;
comment|// Unicode code points to keep when subsetting
if|if
condition|(
name|font
operator|.
name|willBeSubset
argument_list|()
condition|)
block|{
for|for
control|(
name|int
name|offset
init|=
literal|0
init|;
name|offset
operator|<
name|text
operator|.
name|length
argument_list|()
condition|;
control|)
block|{
name|int
name|codePoint
init|=
name|text
operator|.
name|codePointAt
argument_list|(
name|offset
argument_list|)
decl_stmt|;
name|font
operator|.
name|addToSubset
argument_list|(
name|codePoint
argument_list|)
expr_stmt|;
name|offset
operator|+=
name|Character
operator|.
name|charCount
argument_list|(
name|codePoint
argument_list|)
expr_stmt|;
block|}
block|}
name|COSWriter
operator|.
name|writeString
argument_list|(
name|font
operator|.
name|encode
argument_list|(
name|text
argument_list|)
argument_list|,
name|output
argument_list|)
expr_stmt|;
name|write
argument_list|(
literal|" "
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Tj"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Sets the text leading.      *      * @param leading The leading in unscaled text units.      * @throws IOException If there is an error writing to the stream.      */
specifier|public
name|void
name|setLeading
parameter_list|(
name|double
name|leading
parameter_list|)
throws|throws
name|IOException
block|{
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|leading
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"TL"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Move to the start of the next line of text. Requires the leading (see {@link #setLeading})      * to have been set.      *      * @throws IOException If there is an error writing to the stream.      */
specifier|public
name|void
name|newLine
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Must call beginText() before newLine()"
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"T*"
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Td operator.      * A current text matrix will be replaced with a new one (1 0 0 1 x y).      * @param tx The x translation.      * @param ty The y translation.      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #newLineAtOffset} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|moveTextPositionByAmount
parameter_list|(
name|float
name|tx
parameter_list|,
name|float
name|ty
parameter_list|)
throws|throws
name|IOException
block|{
name|newLineAtOffset
argument_list|(
name|tx
argument_list|,
name|ty
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Td operator.      * Move to the start of the next line, offset from the start of the current line by (tx, ty).      *      * @param tx The x translation.      * @param ty The y translation.      * @throws IOException If there is an error writing to the stream.      * @throws IllegalStateException If the method was not allowed to be called at this time.      */
specifier|public
name|void
name|newLineAtOffset
parameter_list|(
name|float
name|tx
parameter_list|,
name|float
name|ty
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: must call beginText() before newLineAtOffset()"
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|tx
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|ty
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Td"
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Tm operator. Sets the text matrix to the given values.      * A current text matrix will be replaced with the new one.      * @param a The a value of the matrix.      * @param b The b value of the matrix.      * @param c The c value of the matrix.      * @param d The d value of the matrix.      * @param e The e value of the matrix.      * @param f The f value of the matrix.      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #setTextMatrix(Matrix)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setTextMatrix
parameter_list|(
name|double
name|a
parameter_list|,
name|double
name|b
parameter_list|,
name|double
name|c
parameter_list|,
name|double
name|d
parameter_list|,
name|double
name|e
parameter_list|,
name|double
name|f
parameter_list|)
throws|throws
name|IOException
block|{
name|setTextMatrix
argument_list|(
operator|new
name|Matrix
argument_list|(
operator|(
name|float
operator|)
name|a
argument_list|,
operator|(
name|float
operator|)
name|b
argument_list|,
operator|(
name|float
operator|)
name|c
argument_list|,
operator|(
name|float
operator|)
name|d
argument_list|,
operator|(
name|float
operator|)
name|e
argument_list|,
operator|(
name|float
operator|)
name|f
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Tm operator. Sets the text matrix to the given values.      * A current text matrix will be replaced with the new one.      * @param matrix the transformation matrix      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #setTextMatrix(Matrix)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setTextMatrix
parameter_list|(
name|AffineTransform
name|matrix
parameter_list|)
throws|throws
name|IOException
block|{
name|setTextMatrix
argument_list|(
operator|new
name|Matrix
argument_list|(
name|matrix
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Tm operator. Sets the text matrix to the given values.      * A current text matrix will be replaced with the new one.      *      * @param matrix the transformation matrix      * @throws IOException If there is an error writing to the stream.      * @throws IllegalStateException If the method was not allowed to be called at this time.      */
specifier|public
name|void
name|setTextMatrix
parameter_list|(
name|Matrix
name|matrix
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: must call beginText() before setTextMatrix"
argument_list|)
throw|;
block|}
name|writeAffineTransform
argument_list|(
name|matrix
operator|.
name|createAffineTransform
argument_list|()
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Tm"
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Tm operator. Sets the text matrix to the given scaling and translation values.      * A current text matrix will be replaced with the new one.      * @param sx The scaling factor in x-direction.      * @param sy The scaling factor in y-direction.      * @param tx The translation value in x-direction.      * @param ty The translation value in y-direction.      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #setTextMatrix(Matrix)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setTextScaling
parameter_list|(
name|double
name|sx
parameter_list|,
name|double
name|sy
parameter_list|,
name|double
name|tx
parameter_list|,
name|double
name|ty
parameter_list|)
throws|throws
name|IOException
block|{
name|setTextMatrix
argument_list|(
operator|new
name|Matrix
argument_list|(
operator|(
name|float
operator|)
name|sx
argument_list|,
literal|0f
argument_list|,
literal|0f
argument_list|,
operator|(
name|float
operator|)
name|sy
argument_list|,
operator|(
name|float
operator|)
name|tx
argument_list|,
operator|(
name|float
operator|)
name|ty
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Tm operator. Sets the text matrix to the given translation values.      * A current text matrix will be replaced with the new one.      * @param tx The translation value in x-direction.      * @param ty The translation value in y-direction.      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #setTextMatrix(Matrix)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setTextTranslation
parameter_list|(
name|double
name|tx
parameter_list|,
name|double
name|ty
parameter_list|)
throws|throws
name|IOException
block|{
name|setTextMatrix
argument_list|(
name|Matrix
operator|.
name|getTranslateInstance
argument_list|(
operator|(
name|float
operator|)
name|tx
argument_list|,
operator|(
name|float
operator|)
name|ty
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * The Tm operator. Sets the text matrix to the given rotation and translation values.      * A current text matrix will be replaced with the new one.      * @param angle The angle used for the counterclockwise rotation in radians.      * @param tx The translation value in x-direction.      * @param ty The translation value in y-direction.      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #setTextMatrix(Matrix)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setTextRotation
parameter_list|(
name|double
name|angle
parameter_list|,
name|double
name|tx
parameter_list|,
name|double
name|ty
parameter_list|)
throws|throws
name|IOException
block|{
name|setTextMatrix
argument_list|(
name|Matrix
operator|.
name|getRotateInstance
argument_list|(
name|angle
argument_list|,
operator|(
name|float
operator|)
name|tx
argument_list|,
operator|(
name|float
operator|)
name|ty
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw an image at the x,y coordinates, with the default size of the image.      *      * @param image The image to draw.      * @param x The x-coordinate to draw the image.      * @param y The y-coordinate to draw the image.      *      * @throws IOException If there is an error writing to the stream.      */
specifier|public
name|void
name|drawImage
parameter_list|(
name|PDImageXObject
name|image
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|)
throws|throws
name|IOException
block|{
name|drawImage
argument_list|(
name|image
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|image
operator|.
name|getWidth
argument_list|()
argument_list|,
name|image
operator|.
name|getHeight
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw an image at the x,y coordinates, with the given size.      *      * @param image The image to draw.      * @param x The x-coordinate to draw the image.      * @param y The y-coordinate to draw the image.      * @param width The width to draw the image.      * @param height The height to draw the image.      *      * @throws IOException If there is an error writing to the stream.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|drawImage
parameter_list|(
name|PDImageXObject
name|image
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|width
parameter_list|,
name|float
name|height
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: drawImage is not allowed within a text block."
argument_list|)
throw|;
block|}
name|saveGraphicsState
argument_list|()
expr_stmt|;
name|AffineTransform
name|transform
init|=
operator|new
name|AffineTransform
argument_list|(
name|width
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|height
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
decl_stmt|;
name|transform
argument_list|(
operator|new
name|Matrix
argument_list|(
name|transform
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|resources
operator|.
name|add
argument_list|(
name|image
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Do"
argument_list|)
expr_stmt|;
name|restoreGraphicsState
argument_list|()
expr_stmt|;
block|}
comment|/**      * Draw an inline image at the x,y coordinates, with the default size of the image.      *      * @param inlineImage The inline image to draw.      * @param x The x-coordinate to draw the inline image.      * @param y The y-coordinate to draw the inline image.      *      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #drawImage(PDInlineImage, float, float)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawInlineImage
parameter_list|(
name|PDInlineImage
name|inlineImage
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|)
throws|throws
name|IOException
block|{
name|drawImage
argument_list|(
name|inlineImage
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|inlineImage
operator|.
name|getWidth
argument_list|()
argument_list|,
name|inlineImage
operator|.
name|getHeight
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw an inline image at the x,y coordinates, with the default size of the image.      *      * @param inlineImage The inline image to draw.      * @param x The x-coordinate to draw the inline image.      * @param y The y-coordinate to draw the inline image.      *      * @throws IOException If there is an error writing to the stream.      */
specifier|public
name|void
name|drawImage
parameter_list|(
name|PDInlineImage
name|inlineImage
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|)
throws|throws
name|IOException
block|{
name|drawImage
argument_list|(
name|inlineImage
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|inlineImage
operator|.
name|getWidth
argument_list|()
argument_list|,
name|inlineImage
operator|.
name|getHeight
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw an inline image at the x,y coordinates and a certain width and height.      *      * @param inlineImage The inline image to draw.      * @param x The x-coordinate to draw the inline image.      * @param y The y-coordinate to draw the inline image.      * @param width The width of the inline image to draw.      * @param height The height of the inline image to draw.      *      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #drawImage(PDInlineImage, float, float, float, float)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawInlineImage
parameter_list|(
name|PDInlineImage
name|inlineImage
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|width
parameter_list|,
name|float
name|height
parameter_list|)
throws|throws
name|IOException
block|{
name|drawImage
argument_list|(
name|inlineImage
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw an inline image at the x,y coordinates and a certain width and height.      *      * @param inlineImage The inline image to draw.      * @param x The x-coordinate to draw the inline image.      * @param y The y-coordinate to draw the inline image.      * @param width The width of the inline image to draw.      * @param height The height of the inline image to draw.      *      * @throws IOException If there is an error writing to the stream.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|drawImage
parameter_list|(
name|PDInlineImage
name|inlineImage
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|width
parameter_list|,
name|float
name|height
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: drawImage is not allowed within a text block."
argument_list|)
throw|;
block|}
name|saveGraphicsState
argument_list|()
expr_stmt|;
name|transform
argument_list|(
operator|new
name|Matrix
argument_list|(
name|width
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|height
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
argument_list|)
expr_stmt|;
comment|// create the image dictionary
name|StringBuilder
name|sb
init|=
operator|new
name|StringBuilder
argument_list|()
decl_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"BI"
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"\n /W "
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|inlineImage
operator|.
name|getWidth
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"\n /H "
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|inlineImage
operator|.
name|getHeight
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"\n /CS "
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"/"
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|inlineImage
operator|.
name|getColorSpace
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|inlineImage
operator|.
name|getDecode
argument_list|()
operator|!=
literal|null
operator|&&
name|inlineImage
operator|.
name|getDecode
argument_list|()
operator|.
name|size
argument_list|()
operator|>
literal|0
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"\n /D "
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|"["
argument_list|)
expr_stmt|;
for|for
control|(
name|COSBase
name|base
range|:
name|inlineImage
operator|.
name|getDecode
argument_list|()
control|)
block|{
name|sb
operator|.
name|append
argument_list|(
operator|(
operator|(
name|COSNumber
operator|)
name|base
operator|)
operator|.
name|intValue
argument_list|()
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|" "
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
literal|"]"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|inlineImage
operator|.
name|isStencil
argument_list|()
condition|)
block|{
name|sb
operator|.
name|append
argument_list|(
literal|"\n /IM true"
argument_list|)
expr_stmt|;
block|}
name|sb
operator|.
name|append
argument_list|(
literal|"\n /BPC "
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|inlineImage
operator|.
name|getBitsPerComponent
argument_list|()
argument_list|)
expr_stmt|;
comment|// image dictionary
name|write
argument_list|(
name|sb
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|writeLine
argument_list|()
expr_stmt|;
comment|// binary data
name|writeOperator
argument_list|(
literal|"ID"
argument_list|)
expr_stmt|;
name|writeBytes
argument_list|(
name|inlineImage
operator|.
name|getData
argument_list|()
argument_list|)
expr_stmt|;
name|writeLine
argument_list|()
expr_stmt|;
name|writeOperator
argument_list|(
literal|"EI"
argument_list|)
expr_stmt|;
name|restoreGraphicsState
argument_list|()
expr_stmt|;
block|}
comment|/**      * Draw an xobject(form or image) at the x,y coordinates and a certain width and height.      *      * @param xobject The xobject to draw.      * @param x The x-coordinate to draw the image.      * @param y The y-coordinate to draw the image.      * @param width The width of the image to draw.      * @param height The height of the image to draw.      *      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #drawImage} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawXObject
parameter_list|(
name|PDXObject
name|xobject
parameter_list|,
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|width
parameter_list|,
name|float
name|height
parameter_list|)
throws|throws
name|IOException
block|{
name|AffineTransform
name|transform
init|=
operator|new
name|AffineTransform
argument_list|(
name|width
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|height
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
decl_stmt|;
name|drawXObject
argument_list|(
name|xobject
argument_list|,
name|transform
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw an xobject(form or image) using the given {@link AffineTransform} to position      * the xobject.      *      * @param xobject The xobject to draw.      * @param transform the transformation matrix      * @throws IOException If there is an error writing to the stream.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #drawImage} or {@link #drawForm} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawXObject
parameter_list|(
name|PDXObject
name|xobject
parameter_list|,
name|AffineTransform
name|transform
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: drawXObject is not allowed within a text block."
argument_list|)
throw|;
block|}
name|String
name|xObjectPrefix
decl_stmt|;
if|if
condition|(
name|xobject
operator|instanceof
name|PDImageXObject
condition|)
block|{
name|xObjectPrefix
operator|=
literal|"Im"
expr_stmt|;
block|}
else|else
block|{
name|xObjectPrefix
operator|=
literal|"Form"
expr_stmt|;
block|}
name|COSName
name|objMapping
init|=
name|resources
operator|.
name|add
argument_list|(
name|xobject
argument_list|,
name|xObjectPrefix
argument_list|)
decl_stmt|;
name|saveGraphicsState
argument_list|()
expr_stmt|;
name|transform
argument_list|(
operator|new
name|Matrix
argument_list|(
name|transform
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|objMapping
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Do"
argument_list|)
expr_stmt|;
name|restoreGraphicsState
argument_list|()
expr_stmt|;
block|}
comment|/**      * Draws the given Form XObject at the current location.      *      * @param form Form XObject      * @throws IOException if the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|drawForm
parameter_list|(
name|PDFormXObject
name|form
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: drawForm is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|resources
operator|.
name|add
argument_list|(
name|form
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"Do"
argument_list|)
expr_stmt|;
block|}
comment|/**      * The cm operator. Concatenates the current transformation matrix with the given values.      * @param a The a value of the matrix.      * @param b The b value of the matrix.      * @param c The c value of the matrix.      * @param d The d value of the matrix.      * @param e The e value of the matrix.      * @param f The f value of the matrix.      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #transform} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|concatenate2CTM
parameter_list|(
name|double
name|a
parameter_list|,
name|double
name|b
parameter_list|,
name|double
name|c
parameter_list|,
name|double
name|d
parameter_list|,
name|double
name|e
parameter_list|,
name|double
name|f
parameter_list|)
throws|throws
name|IOException
block|{
name|transform
argument_list|(
operator|new
name|Matrix
argument_list|(
operator|(
name|float
operator|)
name|a
argument_list|,
operator|(
name|float
operator|)
name|b
argument_list|,
operator|(
name|float
operator|)
name|c
argument_list|,
operator|(
name|float
operator|)
name|d
argument_list|,
operator|(
name|float
operator|)
name|e
argument_list|,
operator|(
name|float
operator|)
name|f
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * The cm operator. Concatenates the current transformation matrix with the given      * {@link AffineTransform}.      * @param at the transformation matrix      * @throws IOException If there is an error writing to the stream.      * @deprecated Use {@link #transform} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|concatenate2CTM
parameter_list|(
name|AffineTransform
name|at
parameter_list|)
throws|throws
name|IOException
block|{
name|transform
argument_list|(
operator|new
name|Matrix
argument_list|(
name|at
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * The cm operator. Concatenates the given matrix with the CTM.      *      * @param matrix the transformation matrix      * @throws IOException If there is an error writing to the stream.      */
specifier|public
name|void
name|transform
parameter_list|(
name|Matrix
name|matrix
parameter_list|)
throws|throws
name|IOException
block|{
name|writeAffineTransform
argument_list|(
name|matrix
operator|.
name|createAffineTransform
argument_list|()
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"cm"
argument_list|)
expr_stmt|;
block|}
comment|/**      * q operator. Saves the current graphics state.      * @throws IOException If an error occurs while writing to the stream.      */
specifier|public
name|void
name|saveGraphicsState
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|fontStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|fontStack
operator|.
name|push
argument_list|(
name|fontStack
operator|.
name|peek
argument_list|()
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|strokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|strokingColorSpaceStack
operator|.
name|push
argument_list|(
name|strokingColorSpaceStack
operator|.
name|peek
argument_list|()
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|nonStrokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|nonStrokingColorSpaceStack
operator|.
name|push
argument_list|(
name|nonStrokingColorSpaceStack
operator|.
name|peek
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|writeOperator
argument_list|(
literal|"q"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Q operator. Restores the current graphics state.      * @throws IOException If an error occurs while writing to the stream.      */
specifier|public
name|void
name|restoreGraphicsState
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
operator|!
name|fontStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|fontStack
operator|.
name|pop
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|strokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|strokingColorSpaceStack
operator|.
name|pop
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|nonStrokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|nonStrokingColorSpaceStack
operator|.
name|pop
argument_list|()
expr_stmt|;
block|}
name|writeOperator
argument_list|(
literal|"Q"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the stroking color space.  This will add the colorspace to the PDResources      * if necessary.      *      * @param colorSpace The colorspace to write.      * @throws IOException If there is an error writing the colorspace.      * @deprecated Use {@link #setStrokingColor} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setStrokingColorSpace
parameter_list|(
name|PDColorSpace
name|colorSpace
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|strokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|strokingColorSpaceStack
operator|.
name|add
argument_list|(
name|colorSpace
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strokingColorSpaceStack
operator|.
name|setElementAt
argument_list|(
name|colorSpace
argument_list|,
name|strokingColorSpaceStack
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
name|writeOperand
argument_list|(
name|getName
argument_list|(
name|colorSpace
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"CS"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the stroking color space.  This will add the colorspace to the PDResources      * if necessary.      *      * @param colorSpace The colorspace to write.      * @throws IOException If there is an error writing the colorspace.      * @deprecated Use {@link #setNonStrokingColor} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setNonStrokingColorSpace
parameter_list|(
name|PDColorSpace
name|colorSpace
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|nonStrokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|nonStrokingColorSpaceStack
operator|.
name|add
argument_list|(
name|colorSpace
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|nonStrokingColorSpaceStack
operator|.
name|setElementAt
argument_list|(
name|colorSpace
argument_list|,
name|nonStrokingColorSpaceStack
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
name|writeOperand
argument_list|(
name|getName
argument_list|(
name|colorSpace
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"cs"
argument_list|)
expr_stmt|;
block|}
specifier|private
name|COSName
name|getName
parameter_list|(
name|PDColorSpace
name|colorSpace
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|colorSpace
operator|instanceof
name|PDDeviceGray
operator|||
name|colorSpace
operator|instanceof
name|PDDeviceRGB
operator|||
name|colorSpace
operator|instanceof
name|PDDeviceCMYK
condition|)
block|{
return|return
name|COSName
operator|.
name|getPDFName
argument_list|(
name|colorSpace
operator|.
name|getName
argument_list|()
argument_list|)
return|;
block|}
else|else
block|{
return|return
name|resources
operator|.
name|add
argument_list|(
name|colorSpace
argument_list|)
return|;
block|}
block|}
comment|/**      * Sets the stroking color and, if necessary, the stroking color space.      *      * @param color Color in a specific color space.      * @throws IOException If an IO error occurs while writing to the stream.      */
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|PDColor
name|color
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|strokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
operator|||
name|strokingColorSpaceStack
operator|.
name|peek
argument_list|()
operator|!=
name|color
operator|.
name|getColorSpace
argument_list|()
condition|)
block|{
name|writeOperand
argument_list|(
name|getName
argument_list|(
name|color
operator|.
name|getColorSpace
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"CS"
argument_list|)
expr_stmt|;
if|if
condition|(
name|strokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|strokingColorSpaceStack
operator|.
name|add
argument_list|(
name|color
operator|.
name|getColorSpace
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strokingColorSpaceStack
operator|.
name|setElementAt
argument_list|(
name|color
operator|.
name|getColorSpace
argument_list|()
argument_list|,
name|strokingColorSpaceStack
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
for|for
control|(
name|float
name|value
range|:
name|color
operator|.
name|getComponents
argument_list|()
control|)
block|{
name|writeOperand
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDPattern
condition|)
block|{
name|writeOperand
argument_list|(
name|color
operator|.
name|getPatternName
argument_list|()
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDPattern
operator|||
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDSeparation
operator|||
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDDeviceN
operator|||
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDICCBased
condition|)
block|{
name|writeOperator
argument_list|(
literal|"SCN"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|writeOperator
argument_list|(
literal|"SC"
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Set the stroking color using an AWT color. Conversion uses the default sRGB color space.      *      * @param color The color to set.      * @throws IOException If an IO error occurs while writing to the stream.      */
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|Color
name|color
parameter_list|)
throws|throws
name|IOException
block|{
name|float
index|[]
name|components
init|=
operator|new
name|float
index|[]
block|{
name|color
operator|.
name|getRed
argument_list|()
operator|/
literal|255f
block|,
name|color
operator|.
name|getGreen
argument_list|()
operator|/
literal|255f
block|,
name|color
operator|.
name|getBlue
argument_list|()
operator|/
literal|255f
block|}
decl_stmt|;
name|PDColor
name|pdColor
init|=
operator|new
name|PDColor
argument_list|(
name|components
argument_list|,
name|PDDeviceRGB
operator|.
name|INSTANCE
argument_list|)
decl_stmt|;
name|setStrokingColor
argument_list|(
name|pdColor
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the color components of current stroking color space.      *      * @param components The components to set for the current color.      * @throws IOException If there is an error while writing to the stream.      * @deprecated Use {@link #setStrokingColor(PDColor)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|float
index|[]
name|components
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|strokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"The color space must be set before setting a color"
argument_list|)
throw|;
block|}
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|components
operator|.
name|length
condition|;
name|i
operator|++
control|)
block|{
name|writeOperand
argument_list|(
name|components
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|PDColorSpace
name|currentStrokingColorSpace
init|=
name|strokingColorSpaceStack
operator|.
name|peek
argument_list|()
decl_stmt|;
if|if
condition|(
name|currentStrokingColorSpace
operator|instanceof
name|PDSeparation
operator|||
name|currentStrokingColorSpace
operator|instanceof
name|PDPattern
operator|||
name|currentStrokingColorSpace
operator|instanceof
name|PDICCBased
condition|)
block|{
name|writeOperator
argument_list|(
literal|"SCN"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|writeOperator
argument_list|(
literal|"SC"
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Set the stroking color in the DeviceRGB color space. Range is 0..255.      *      * @param r The red value      * @param g The green value.      * @param b The blue value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameters are invalid.      */
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|int
name|r
parameter_list|,
name|int
name|g
parameter_list|,
name|int
name|b
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutside255Interval
argument_list|(
name|r
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|g
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|b
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameters must be within 0..255, but are "
operator|+
name|String
operator|.
name|format
argument_list|(
literal|"(%d,%d,%d)"
argument_list|,
name|r
argument_list|,
name|g
argument_list|,
name|b
argument_list|)
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|r
operator|/
literal|255f
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|g
operator|/
literal|255f
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|b
operator|/
literal|255f
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"RG"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the stroking color in the DeviceCMYK color space. Range is 0..255.      *      * @param c The cyan value.      * @param m The magenta value.      * @param y The yellow value.      * @param k The black value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameters are invalid.      * @deprecated Use {@link #setStrokingColor(float, float, float, float)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|int
name|c
parameter_list|,
name|int
name|m
parameter_list|,
name|int
name|y
parameter_list|,
name|int
name|k
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutside255Interval
argument_list|(
name|c
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|m
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|y
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|k
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameters must be within 0..255, but are "
operator|+
name|String
operator|.
name|format
argument_list|(
literal|"(%d,%d,%d,%d)"
argument_list|,
name|c
argument_list|,
name|m
argument_list|,
name|y
argument_list|,
name|k
argument_list|)
argument_list|)
throw|;
block|}
name|setStrokingColor
argument_list|(
name|c
operator|/
literal|255f
argument_list|,
name|m
operator|/
literal|255f
argument_list|,
name|y
operator|/
literal|255f
argument_list|,
name|k
operator|/
literal|255f
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the stroking color in the DeviceCMYK color space. Range is 0..1      *      * @param c The cyan value.      * @param m The magenta value.      * @param y The yellow value.      * @param k The black value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameters are invalid.      */
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|float
name|c
parameter_list|,
name|float
name|m
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|k
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutsideOneInterval
argument_list|(
name|c
argument_list|)
operator|||
name|isOutsideOneInterval
argument_list|(
name|m
argument_list|)
operator|||
name|isOutsideOneInterval
argument_list|(
name|y
argument_list|)
operator|||
name|isOutsideOneInterval
argument_list|(
name|k
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameters must be within 0..1, but are "
operator|+
name|String
operator|.
name|format
argument_list|(
literal|"(%.2f,%.2f,%.2f,%.2f)"
argument_list|,
name|c
argument_list|,
name|m
argument_list|,
name|y
argument_list|,
name|k
argument_list|)
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|m
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|k
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"K"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the stroking color in the DeviceGray color space. Range is 0..255.      *      * @param g The gray value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameter is invalid.      * @deprecated Use {@link #setStrokingColor(double)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|int
name|g
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutside255Interval
argument_list|(
name|g
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameter must be within 0..255, but is "
operator|+
name|g
argument_list|)
throw|;
block|}
name|setStrokingColor
argument_list|(
name|g
operator|/
literal|255f
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the stroking color in the DeviceGray color space. Range is 0..1.      *      * @param g The gray value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameter is invalid.      */
specifier|public
name|void
name|setStrokingColor
parameter_list|(
name|double
name|g
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutsideOneInterval
argument_list|(
name|g
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameter must be within 0..1, but is "
operator|+
name|g
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|g
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"G"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Sets the non-stroking color and, if necessary, the non-stroking color space.      *      * @param color Color in a specific color space.      * @throws IOException If an IO error occurs while writing to the stream.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|PDColor
name|color
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|nonStrokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
operator|||
name|nonStrokingColorSpaceStack
operator|.
name|peek
argument_list|()
operator|!=
name|color
operator|.
name|getColorSpace
argument_list|()
condition|)
block|{
name|writeOperand
argument_list|(
name|getName
argument_list|(
name|color
operator|.
name|getColorSpace
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"cs"
argument_list|)
expr_stmt|;
if|if
condition|(
name|nonStrokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|nonStrokingColorSpaceStack
operator|.
name|add
argument_list|(
name|color
operator|.
name|getColorSpace
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|nonStrokingColorSpaceStack
operator|.
name|setElementAt
argument_list|(
name|color
operator|.
name|getColorSpace
argument_list|()
argument_list|,
name|nonStrokingColorSpaceStack
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
for|for
control|(
name|float
name|value
range|:
name|color
operator|.
name|getComponents
argument_list|()
control|)
block|{
name|writeOperand
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDPattern
condition|)
block|{
name|writeOperand
argument_list|(
name|color
operator|.
name|getPatternName
argument_list|()
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDPattern
operator|||
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDSeparation
operator|||
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDDeviceN
operator|||
name|color
operator|.
name|getColorSpace
argument_list|()
operator|instanceof
name|PDICCBased
condition|)
block|{
name|writeOperator
argument_list|(
literal|"scn"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|writeOperator
argument_list|(
literal|"sc"
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Set the non-stroking color using an AWT color. Conversion uses the default sRGB color space.      *      * @param color The color to set.      * @throws IOException If an IO error occurs while writing to the stream.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|Color
name|color
parameter_list|)
throws|throws
name|IOException
block|{
name|float
index|[]
name|components
init|=
operator|new
name|float
index|[]
block|{
name|color
operator|.
name|getRed
argument_list|()
operator|/
literal|255f
block|,
name|color
operator|.
name|getGreen
argument_list|()
operator|/
literal|255f
block|,
name|color
operator|.
name|getBlue
argument_list|()
operator|/
literal|255f
block|}
decl_stmt|;
name|PDColor
name|pdColor
init|=
operator|new
name|PDColor
argument_list|(
name|components
argument_list|,
name|PDDeviceRGB
operator|.
name|INSTANCE
argument_list|)
decl_stmt|;
name|setNonStrokingColor
argument_list|(
name|pdColor
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the color components of current non-stroking color space.      *      * @param components The components to set for the current color.      * @throws IOException If there is an error while writing to the stream.      * @deprecated Use {@link #setNonStrokingColor(PDColor)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|float
index|[]
name|components
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|nonStrokingColorSpaceStack
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"The color space must be set before setting a color"
argument_list|)
throw|;
block|}
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|components
operator|.
name|length
condition|;
name|i
operator|++
control|)
block|{
name|writeOperand
argument_list|(
name|components
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|PDColorSpace
name|currentNonStrokingColorSpace
init|=
name|nonStrokingColorSpaceStack
operator|.
name|peek
argument_list|()
decl_stmt|;
if|if
condition|(
name|currentNonStrokingColorSpace
operator|instanceof
name|PDSeparation
operator|||
name|currentNonStrokingColorSpace
operator|instanceof
name|PDPattern
operator|||
name|currentNonStrokingColorSpace
operator|instanceof
name|PDICCBased
condition|)
block|{
name|writeOperator
argument_list|(
literal|"scn"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|writeOperator
argument_list|(
literal|"sc"
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Set the non-stroking color in the DeviceRGB color space. Range is 0..255.      *      * @param r The red value.      * @param g The green value.      * @param b The blue value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameters are invalid.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|int
name|r
parameter_list|,
name|int
name|g
parameter_list|,
name|int
name|b
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutside255Interval
argument_list|(
name|r
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|g
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|b
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameters must be within 0..255, but are "
operator|+
name|String
operator|.
name|format
argument_list|(
literal|"(%d,%d,%d)"
argument_list|,
name|r
argument_list|,
name|g
argument_list|,
name|b
argument_list|)
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|r
operator|/
literal|255f
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|g
operator|/
literal|255f
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|b
operator|/
literal|255f
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"rg"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the non-stroking color in the DeviceCMYK color space. Range is 0..255.      *      * @param c The cyan value.      * @param m The magenta value.      * @param y The yellow value.      * @param k The black value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameters are invalid.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|int
name|c
parameter_list|,
name|int
name|m
parameter_list|,
name|int
name|y
parameter_list|,
name|int
name|k
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutside255Interval
argument_list|(
name|c
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|m
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|y
argument_list|)
operator|||
name|isOutside255Interval
argument_list|(
name|k
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameters must be within 0..255, but are "
operator|+
name|String
operator|.
name|format
argument_list|(
literal|"(%d,%d,%d,%d)"
argument_list|,
name|c
argument_list|,
name|m
argument_list|,
name|y
argument_list|,
name|k
argument_list|)
argument_list|)
throw|;
block|}
name|setNonStrokingColor
argument_list|(
name|c
operator|/
literal|255f
argument_list|,
name|m
operator|/
literal|255f
argument_list|,
name|y
operator|/
literal|255f
argument_list|,
name|k
operator|/
literal|255f
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the non-stroking color in the DeviceRGB color space. Range is 0..1.      *      * @param c The cyan value.      * @param m The magenta value.      * @param y The yellow value.      * @param k The black value.      * @throws IOException If an IO error occurs while writing to the stream.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|double
name|c
parameter_list|,
name|double
name|m
parameter_list|,
name|double
name|y
parameter_list|,
name|double
name|k
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutsideOneInterval
argument_list|(
name|c
argument_list|)
operator|||
name|isOutsideOneInterval
argument_list|(
name|m
argument_list|)
operator|||
name|isOutsideOneInterval
argument_list|(
name|y
argument_list|)
operator|||
name|isOutsideOneInterval
argument_list|(
name|k
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameters must be within 0..1, but are "
operator|+
name|String
operator|.
name|format
argument_list|(
literal|"(%.2f,%.2f,%.2f,%.2f)"
argument_list|,
name|c
argument_list|,
name|m
argument_list|,
name|y
argument_list|,
name|k
argument_list|)
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|c
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|m
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|y
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|k
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"k"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the non-stroking color in the DeviceGray color space. Range is 0..255.      *      * @param g The gray value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameter is invalid.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|int
name|g
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutside255Interval
argument_list|(
name|g
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameter must be within 0..255, but is "
operator|+
name|g
argument_list|)
throw|;
block|}
name|setNonStrokingColor
argument_list|(
name|g
operator|/
literal|255f
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the non-stroking color in the DeviceGray color space. Range is 0..1.      *      * @param g The gray value.      * @throws IOException If an IO error occurs while writing to the stream.      * @throws IllegalArgumentException If the parameter is invalid.      */
specifier|public
name|void
name|setNonStrokingColor
parameter_list|(
name|double
name|g
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|isOutsideOneInterval
argument_list|(
name|g
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Parameter must be within 0..1, but is "
operator|+
name|g
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|g
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"g"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Add a rectangle to the current path.      *      * @param x The lower left x coordinate.      * @param y The lower left y coordinate.      * @param width The width of the rectangle.      * @param height The height of the rectangle.      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|addRect
parameter_list|(
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|width
parameter_list|,
name|float
name|height
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: addRect is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|x
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|width
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|height
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"re"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw a rectangle on the page using the current non stroking color.      *      * @param x The lower left x coordinate.      * @param y The lower left y coordinate.      * @param width The width of the rectangle.      * @param height The height of the rectangle.      * @throws IOException If there is an error while drawing on the screen.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #addRect} followed by {@link #fill()} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|fillRect
parameter_list|(
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|,
name|float
name|width
parameter_list|,
name|float
name|height
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: fillRect is not allowed within a text block."
argument_list|)
throw|;
block|}
name|addRect
argument_list|(
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|fill
argument_list|()
expr_stmt|;
block|}
comment|/**      * Append a cubic Bézier curve to the current path. The curve extends from the current      * point to the point (x3 , y3 ), using (x1 , y1 ) and (x2 , y2 ) as the Bézier control points      * @param x1 x coordinate of the point 1      * @param y1 y coordinate of the point 1      * @param x2 x coordinate of the point 2      * @param y2 y coordinate of the point 2      * @param x3 x coordinate of the point 3      * @param y3 y coordinate of the point 3      * @throws IOException If there is an error while adding the .      * @deprecated Use {@link #curveTo} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|addBezier312
parameter_list|(
name|float
name|x1
parameter_list|,
name|float
name|y1
parameter_list|,
name|float
name|x2
parameter_list|,
name|float
name|y2
parameter_list|,
name|float
name|x3
parameter_list|,
name|float
name|y3
parameter_list|)
throws|throws
name|IOException
block|{
name|curveTo
argument_list|(
name|x1
argument_list|,
name|y1
argument_list|,
name|x2
argument_list|,
name|y2
argument_list|,
name|x3
argument_list|,
name|y3
argument_list|)
expr_stmt|;
block|}
comment|/**      * Append a cubic Bézier curve to the current path. The curve extends from the current point to      * the point (x3, y3), using (x1, y1) and (x2, y2) as the Bézier control points.      *      * @param x1 x coordinate of the point 1      * @param y1 y coordinate of the point 1      * @param x2 x coordinate of the point 2      * @param y2 y coordinate of the point 2      * @param x3 x coordinate of the point 3      * @param y3 y coordinate of the point 3      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|curveTo
parameter_list|(
name|float
name|x1
parameter_list|,
name|float
name|y1
parameter_list|,
name|float
name|x2
parameter_list|,
name|float
name|y2
parameter_list|,
name|float
name|x3
parameter_list|,
name|float
name|y3
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: curveTo is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|x1
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y1
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|x2
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y2
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|x3
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y3
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"c"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Append a cubic Bézier curve to the current path. The curve extends from the current      * point to the point (x3 , y3 ), using the current point and (x2 , y2 ) as the Bézier control points/      *      * @param x2 x coordinate of the point 2      * @param y2 y coordinate of the point 2      * @param x3 x coordinate of the point 3      * @param y3 y coordinate of the point 3      * @throws IOException If there is an error while adding the .      * @deprecated Use {@link #curveTo2} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|addBezier32
parameter_list|(
name|float
name|x2
parameter_list|,
name|float
name|y2
parameter_list|,
name|float
name|x3
parameter_list|,
name|float
name|y3
parameter_list|)
throws|throws
name|IOException
block|{
name|curveTo2
argument_list|(
name|x2
argument_list|,
name|y2
argument_list|,
name|x3
argument_list|,
name|y3
argument_list|)
expr_stmt|;
block|}
comment|/**      * Append a cubic Bézier curve to the current path. The curve extends from the current point to      * the point (x3, y3), using the current point and (x2, y2) as the Bézier control points.      *      * @param x2 x coordinate of the point 2      * @param y2 y coordinate of the point 2      * @param x3 x coordinate of the point 3      * @param y3 y coordinate of the point 3      * @throws IllegalStateException If the method was called within a text block.      * @throws IOException If the content stream could not be written.      */
specifier|public
name|void
name|curveTo2
parameter_list|(
name|float
name|x2
parameter_list|,
name|float
name|y2
parameter_list|,
name|float
name|x3
parameter_list|,
name|float
name|y3
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: curveTo2 is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|x2
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y2
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|x3
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y3
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"v"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Append a cubic Bézier curve to the current path. The curve extends from the current      * point to the point (x3 , y3 ), using (x1 , y1 ) and (x3 , y3 ) as the Bézier control points/      *      * @param x1 x coordinate of the point 1      * @param y1 y coordinate of the point 1      * @param x3 x coordinate of the point 3      * @param y3 y coordinate of the point 3      * @throws IOException If there is an error while adding the .      * @deprecated Use {@link #curveTo1} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|addBezier31
parameter_list|(
name|float
name|x1
parameter_list|,
name|float
name|y1
parameter_list|,
name|float
name|x3
parameter_list|,
name|float
name|y3
parameter_list|)
throws|throws
name|IOException
block|{
name|curveTo1
argument_list|(
name|x1
argument_list|,
name|y1
argument_list|,
name|x3
argument_list|,
name|y3
argument_list|)
expr_stmt|;
block|}
comment|/**      * Append a cubic Bézier curve to the current path. The curve extends from the current point to      * the point (x3, y3), using (x1, y1) and (x3, y3) as the Bézier control points.      *      * @param x1 x coordinate of the point 1      * @param y1 y coordinate of the point 1      * @param x3 x coordinate of the point 3      * @param y3 y coordinate of the point 3      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|curveTo1
parameter_list|(
name|float
name|x1
parameter_list|,
name|float
name|y1
parameter_list|,
name|float
name|x3
parameter_list|,
name|float
name|y3
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: curveTo1 is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|x1
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y1
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|x3
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y3
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"y"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Move the current position to the given coordinates.      *      * @param x The x coordinate.      * @param y The y coordinate.      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|moveTo
parameter_list|(
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: moveTo is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|x
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"m"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw a line from the current position to the given coordinates.      *      * @param x The x coordinate.      * @param y The y coordinate.      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|lineTo
parameter_list|(
name|float
name|x
parameter_list|,
name|float
name|y
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: lineTo is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|x
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|y
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"l"
argument_list|)
expr_stmt|;
block|}
comment|/**      * add a line to the current path.      *      * @param xStart The start x coordinate.      * @param yStart The start y coordinate.      * @param xEnd The end x coordinate.      * @param yEnd The end y coordinate.      * @throws IOException If there is an error while adding the line.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #moveTo} followed by {@link #lineTo}.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|addLine
parameter_list|(
name|float
name|xStart
parameter_list|,
name|float
name|yStart
parameter_list|,
name|float
name|xEnd
parameter_list|,
name|float
name|yEnd
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: addLine is not allowed within a text block."
argument_list|)
throw|;
block|}
name|moveTo
argument_list|(
name|xStart
argument_list|,
name|yStart
argument_list|)
expr_stmt|;
name|lineTo
argument_list|(
name|xEnd
argument_list|,
name|yEnd
argument_list|)
expr_stmt|;
block|}
comment|/**      * Draw a line on the page using the current non stroking color and the current line width.      *      * @param xStart The start x coordinate.      * @param yStart The start y coordinate.      * @param xEnd The end x coordinate.      * @param yEnd The end y coordinate.      * @throws IOException If there is an error while drawing on the screen.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #moveTo} followed by {@link #lineTo} followed by {@link #stroke}.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawLine
parameter_list|(
name|float
name|xStart
parameter_list|,
name|float
name|yStart
parameter_list|,
name|float
name|xEnd
parameter_list|,
name|float
name|yEnd
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: drawLine is not allowed within a text block."
argument_list|)
throw|;
block|}
name|moveTo
argument_list|(
name|xStart
argument_list|,
name|yStart
argument_list|)
expr_stmt|;
name|lineTo
argument_list|(
name|xEnd
argument_list|,
name|yEnd
argument_list|)
expr_stmt|;
name|stroke
argument_list|()
expr_stmt|;
block|}
comment|/**      * Add a polygon to the current path.      * @param x x coordinate of each points      * @param y y coordinate of each points      * @throws IOException If there is an error while drawing on the screen.      * @throws IllegalStateException If the method was called within a text block.      * @throws IllegalArgumentException If the two arrays have different lengths.      * @deprecated Use {@link #moveTo} and {@link #lineTo} methods instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|addPolygon
parameter_list|(
name|float
index|[]
name|x
parameter_list|,
name|float
index|[]
name|y
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: addPolygon is not allowed within a text block."
argument_list|)
throw|;
block|}
if|if
condition|(
name|x
operator|.
name|length
operator|!=
name|y
operator|.
name|length
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Error: some points are missing coordinate"
argument_list|)
throw|;
block|}
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|x
operator|.
name|length
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|i
operator|==
literal|0
condition|)
block|{
name|moveTo
argument_list|(
name|x
index|[
name|i
index|]
argument_list|,
name|y
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|lineTo
argument_list|(
name|x
index|[
name|i
index|]
argument_list|,
name|y
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
block|}
name|closeSubPath
argument_list|()
expr_stmt|;
block|}
comment|/**      * Draw a polygon on the page using the current non stroking color.      * @param x x coordinate of each points      * @param y y coordinate of each points      * @throws IOException If there is an error while drawing on the screen.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #moveTo} and {@link #lineTo} methods instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|drawPolygon
parameter_list|(
name|float
index|[]
name|x
parameter_list|,
name|float
index|[]
name|y
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: drawPolygon is not allowed within a text block."
argument_list|)
throw|;
block|}
name|addPolygon
argument_list|(
name|x
argument_list|,
name|y
argument_list|)
expr_stmt|;
name|stroke
argument_list|()
expr_stmt|;
block|}
comment|/**      * Draw and fill a polygon on the page using the current non stroking color.      * @param x x coordinate of each points      * @param y y coordinate of each points      * @throws IOException If there is an error while drawing on the screen.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #moveTo} and {@link #lineTo} methods instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|fillPolygon
parameter_list|(
name|float
index|[]
name|x
parameter_list|,
name|float
index|[]
name|y
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: fillPolygon is not allowed within a text block."
argument_list|)
throw|;
block|}
name|addPolygon
argument_list|(
name|x
argument_list|,
name|y
argument_list|)
expr_stmt|;
name|fill
argument_list|()
expr_stmt|;
block|}
comment|/**      * Stroke the path.      *       * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|stroke
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: stroke is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"S"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Close and stroke the path.      *       * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|closeAndStroke
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: closeAndStroke is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"s"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Fill the path.      *       * @param windingRule the winding rule to be used for filling      * @throws IOException If the content stream could not be written      * @throws IllegalArgumentException If the parameter is not a valid winding rule.      * @deprecated Use {@link #fill()} or {@link #fillEvenOdd} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|fill
parameter_list|(
name|int
name|windingRule
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|windingRule
operator|==
name|PathIterator
operator|.
name|WIND_NON_ZERO
condition|)
block|{
name|fill
argument_list|()
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|windingRule
operator|==
name|PathIterator
operator|.
name|WIND_EVEN_ODD
condition|)
block|{
name|fillEvenOdd
argument_list|()
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Error: unknown value for winding rule"
argument_list|)
throw|;
block|}
block|}
comment|/**      * Fills the path using the nonzero winding rule.      *      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|fill
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: fill is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"f"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Fills the path using the even-odd winding rule.      *      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|fillEvenOdd
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: fill is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"f*"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Fills the clipping area with the given shading.      *      * @param shading Shading resource      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|shadingFill
parameter_list|(
name|PDShading
name|shading
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: shadingFill is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|resources
operator|.
name|add
argument_list|(
name|shading
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"sh"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Closes the current subpath.      *       * @throws IOException If the content stream could not be written      * @deprecated Use {@link #closePath()} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|closeSubPath
parameter_list|()
throws|throws
name|IOException
block|{
name|closePath
argument_list|()
expr_stmt|;
block|}
comment|/**      * Closes the current subpath.      *      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|closePath
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: closePath is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"h"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Clip path.      *       * @param windingRule the winding rule to be used for clipping      * @throws IOException If there is an error while clipping the path.      * @throws IllegalStateException If the method was called within a text block.      * @deprecated Use {@link #clip()} or {@link #clipEvenOdd} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|clipPath
parameter_list|(
name|int
name|windingRule
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: clipPath is not allowed within a text block."
argument_list|)
throw|;
block|}
if|if
condition|(
name|windingRule
operator|==
name|PathIterator
operator|.
name|WIND_NON_ZERO
condition|)
block|{
name|writeOperator
argument_list|(
literal|"W"
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|windingRule
operator|==
name|PathIterator
operator|.
name|WIND_EVEN_ODD
condition|)
block|{
name|writeOperator
argument_list|(
literal|"W*"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Error: unknown value for winding rule"
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"n"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Intersects the current clipping path with the current path, using the nonzero rule.      *      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|clip
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: clip is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"W"
argument_list|)
expr_stmt|;
comment|// end path without filling or stroking
name|writeOperator
argument_list|(
literal|"n"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Intersects the current clipping path with the current path, using the even-odd rule.      *      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|clipEvenOdd
parameter_list|()
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: clipEvenOdd is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperator
argument_list|(
literal|"W*"
argument_list|)
expr_stmt|;
comment|// end path without filling or stroking
name|writeOperator
argument_list|(
literal|"n"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set line width to the given value.      *      * @param lineWidth The width which is used for drwaing.      * @throws IOException If the content stream could not be written      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|setLineWidth
parameter_list|(
name|float
name|lineWidth
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: setLineWidth is not allowed within a text block."
argument_list|)
throw|;
block|}
name|writeOperand
argument_list|(
name|lineWidth
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"w"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set the line join style.      *      * @param lineJoinStyle 0 for miter join, 1 for round join, and 2 for bevel join.      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      * @throws IllegalArgumentException If the parameter is not a valid line join style.      */
specifier|public
name|void
name|setLineJoinStyle
parameter_list|(
name|int
name|lineJoinStyle
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: setLineJoinStyle is not allowed within a text block."
argument_list|)
throw|;
block|}
if|if
condition|(
name|lineJoinStyle
operator|>=
literal|0
operator|&&
name|lineJoinStyle
operator|<=
literal|2
condition|)
block|{
name|writeOperand
argument_list|(
name|lineJoinStyle
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"j"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Error: unknown value for line join style"
argument_list|)
throw|;
block|}
block|}
comment|/**      * Set the line cap style.      *      * @param lineCapStyle 0 for butt cap, 1 for round cap, and 2 for projecting square cap.      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      * @throws IllegalArgumentException If the parameter is not a valid line cap style.      */
specifier|public
name|void
name|setLineCapStyle
parameter_list|(
name|int
name|lineCapStyle
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: setLineCapStyle is not allowed within a text block."
argument_list|)
throw|;
block|}
if|if
condition|(
name|lineCapStyle
operator|>=
literal|0
operator|&&
name|lineCapStyle
operator|<=
literal|2
condition|)
block|{
name|writeOperand
argument_list|(
name|lineCapStyle
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"J"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Error: unknown value for line cap style"
argument_list|)
throw|;
block|}
block|}
comment|/**      * Set the line dash pattern.      *      * @param pattern The pattern array      * @param phase The phase of the pattern      * @throws IOException If the content stream could not be written.      * @throws IllegalStateException If the method was called within a text block.      */
specifier|public
name|void
name|setLineDashPattern
parameter_list|(
name|float
index|[]
name|pattern
parameter_list|,
name|float
name|phase
parameter_list|)
throws|throws
name|IOException
block|{
if|if
condition|(
name|inTextMode
condition|)
block|{
throw|throw
operator|new
name|IllegalStateException
argument_list|(
literal|"Error: setLineDashPattern is not allowed within a text block."
argument_list|)
throw|;
block|}
name|write
argument_list|(
literal|"["
argument_list|)
expr_stmt|;
for|for
control|(
name|float
name|value
range|:
name|pattern
control|)
block|{
name|writeOperand
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
name|write
argument_list|(
literal|"] "
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|phase
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"d"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Begin a marked content sequence.      *      * @param tag the tag      * @throws IOException if an I/O error occurs      * @deprecated Use {@link #beginMarkedContent} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|beginMarkedContentSequence
parameter_list|(
name|COSName
name|tag
parameter_list|)
throws|throws
name|IOException
block|{
name|beginMarkedContent
argument_list|(
name|tag
argument_list|)
expr_stmt|;
block|}
comment|/**      * Begin a marked content sequence.      *      * @param tag the tag      * @throws IOException If the content stream could not be written      */
specifier|public
name|void
name|beginMarkedContent
parameter_list|(
name|COSName
name|tag
parameter_list|)
throws|throws
name|IOException
block|{
name|writeOperand
argument_list|(
name|tag
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"BMC"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Begin a marked content sequence with a reference to an entry in the page resources'      * Properties dictionary.      *      * @param tag the tag      * @param propsName the properties reference      * @throws IOException if an I/O error occurs      * @deprecated Use {@link #beginMarkedContent(COSName, PDPropertyList)} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|beginMarkedContentSequence
parameter_list|(
name|COSName
name|tag
parameter_list|,
name|COSName
name|propsName
parameter_list|)
throws|throws
name|IOException
block|{
name|writeOperand
argument_list|(
name|tag
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|propsName
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"BDC"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Begin a marked content sequence with a reference to an entry in the page resources'      * Properties dictionary.      *      * @param tag the tag      * @param propertyList property list      * @throws IOException If the content stream could not be written      */
specifier|public
name|void
name|beginMarkedContent
parameter_list|(
name|COSName
name|tag
parameter_list|,
name|PDPropertyList
name|propertyList
parameter_list|)
throws|throws
name|IOException
block|{
name|writeOperand
argument_list|(
name|tag
argument_list|)
expr_stmt|;
name|writeOperand
argument_list|(
name|resources
operator|.
name|add
argument_list|(
name|propertyList
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"BDC"
argument_list|)
expr_stmt|;
block|}
comment|/**      * End a marked content sequence.      *      * @throws IOException If the content stream could not be written      * @deprecated Use {@link #endMarkedContent} instead.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|endMarkedContentSequence
parameter_list|()
throws|throws
name|IOException
block|{
name|endMarkedContent
argument_list|()
expr_stmt|;
block|}
comment|/**      * End a marked content sequence.      *      * @throws IOException If the content stream could not be written      */
specifier|public
name|void
name|endMarkedContent
parameter_list|()
throws|throws
name|IOException
block|{
name|writeOperator
argument_list|(
literal|"EMC"
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will append raw commands to the content stream.      *      * @param commands The commands to append to the stream.      * @throws IOException If an error occurs while writing to the stream.      * @deprecated This method will be removed in a future release.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|appendRawCommands
parameter_list|(
name|String
name|commands
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|commands
operator|.
name|getBytes
argument_list|(
name|Charsets
operator|.
name|US_ASCII
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will append raw commands to the content stream.      *      * @param commands The commands to append to the stream.      * @throws IOException If an error occurs while writing to the stream.      * @deprecated This method will be removed in a future release.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|appendRawCommands
parameter_list|(
name|byte
index|[]
name|commands
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|commands
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will append raw commands to the content stream.      *      * @param data Append a raw byte to the stream.      * @throws IOException If an error occurs while writing to the stream.      * @deprecated This method will be removed in a future release.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|appendRawCommands
parameter_list|(
name|int
name|data
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|data
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will append raw commands to the content stream.      *      * @param data Append a formatted double value to the stream.      * @throws IOException If an error occurs while writing to the stream.      * @deprecated This method will be removed in a future release.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|appendRawCommands
parameter_list|(
name|double
name|data
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|formatDecimal
operator|.
name|format
argument_list|(
name|data
argument_list|)
operator|.
name|getBytes
argument_list|(
name|Charsets
operator|.
name|US_ASCII
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will append raw commands to the content stream.      *      * @param data Append a formatted float value to the stream.      * @throws IOException If an error occurs while writing to the stream.      * @deprecated This method will be removed in a future release.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|appendRawCommands
parameter_list|(
name|float
name|data
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|formatDecimal
operator|.
name|format
argument_list|(
name|data
argument_list|)
operator|.
name|getBytes
argument_list|(
name|Charsets
operator|.
name|US_ASCII
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * This will append a {@link COSName} to the content stream.      *      * @param name the name      * @throws IOException If an error occurs while writing to the stream.      * @deprecated This method will be removed in a future release.      */
annotation|@
name|Deprecated
specifier|public
name|void
name|appendCOSName
parameter_list|(
name|COSName
name|name
parameter_list|)
throws|throws
name|IOException
block|{
name|name
operator|.
name|writePDF
argument_list|(
name|output
argument_list|)
expr_stmt|;
block|}
comment|/**      * Set an extended graphics state.      *       * @param state The extended graphics state.      * @throws IOException If the content stream could not be written.      */
specifier|public
name|void
name|setGraphicsStateParameters
parameter_list|(
name|PDExtendedGraphicsState
name|state
parameter_list|)
throws|throws
name|IOException
block|{
name|writeOperand
argument_list|(
name|resources
operator|.
name|add
argument_list|(
name|state
argument_list|)
argument_list|)
expr_stmt|;
name|writeOperator
argument_list|(
literal|"gs"
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes a real real to the content stream.      */
specifier|private
name|void
name|writeOperand
parameter_list|(
name|float
name|real
parameter_list|)
throws|throws
name|IOException
block|{
name|write
argument_list|(
name|formatDecimal
operator|.
name|format
argument_list|(
name|real
argument_list|)
argument_list|)
expr_stmt|;
name|output
operator|.
name|write
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes a real number to the content stream.      */
specifier|private
name|void
name|writeOperand
parameter_list|(
name|int
name|integer
parameter_list|)
throws|throws
name|IOException
block|{
name|write
argument_list|(
name|formatDecimal
operator|.
name|format
argument_list|(
name|integer
argument_list|)
argument_list|)
expr_stmt|;
name|output
operator|.
name|write
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes a COSName to the content stream.      */
specifier|private
name|void
name|writeOperand
parameter_list|(
name|COSName
name|name
parameter_list|)
throws|throws
name|IOException
block|{
name|name
operator|.
name|writePDF
argument_list|(
name|output
argument_list|)
expr_stmt|;
name|output
operator|.
name|write
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes a string to the content stream as ASCII.      */
specifier|private
name|void
name|writeOperator
parameter_list|(
name|String
name|text
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|text
operator|.
name|getBytes
argument_list|(
name|Charsets
operator|.
name|US_ASCII
argument_list|)
argument_list|)
expr_stmt|;
name|output
operator|.
name|write
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes a string to the content stream as ASCII.      */
specifier|private
name|void
name|write
parameter_list|(
name|String
name|text
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|text
operator|.
name|getBytes
argument_list|(
name|Charsets
operator|.
name|US_ASCII
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes a string to the content stream as ASCII.      */
specifier|private
name|void
name|writeLine
parameter_list|()
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes binary data to the content stream.      */
specifier|private
name|void
name|writeBytes
parameter_list|(
name|byte
index|[]
name|data
parameter_list|)
throws|throws
name|IOException
block|{
name|output
operator|.
name|write
argument_list|(
name|data
argument_list|)
expr_stmt|;
block|}
comment|/**      * Writes an AffineTransform to the content stream as an array.      */
specifier|private
name|void
name|writeAffineTransform
parameter_list|(
name|AffineTransform
name|transform
parameter_list|)
throws|throws
name|IOException
block|{
name|double
index|[]
name|values
init|=
operator|new
name|double
index|[
literal|6
index|]
decl_stmt|;
name|transform
operator|.
name|getMatrix
argument_list|(
name|values
argument_list|)
expr_stmt|;
for|for
control|(
name|double
name|v
range|:
name|values
control|)
block|{
name|writeOperand
argument_list|(
operator|(
name|float
operator|)
name|v
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Close the content stream.  This must be called when you are done with this object.      *      * @throws IOException If the underlying stream has a problem being written to.      */
annotation|@
name|Override
specifier|public
name|void
name|close
parameter_list|()
throws|throws
name|IOException
block|{
name|output
operator|.
name|close
argument_list|()
expr_stmt|;
block|}
specifier|private
name|boolean
name|isOutside255Interval
parameter_list|(
name|int
name|val
parameter_list|)
block|{
return|return
name|val
argument_list|<
literal|0
operator|||
name|val
argument_list|>
literal|255
return|;
block|}
specifier|private
name|boolean
name|isOutsideOneInterval
parameter_list|(
name|double
name|val
parameter_list|)
block|{
return|return
name|val
argument_list|<
literal|0
operator|||
name|val
argument_list|>
literal|1
return|;
block|}
block|}
end_class

end_unit

